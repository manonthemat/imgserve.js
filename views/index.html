<!DOCTYPE html>
<html>
  <head>
    <title>imgshare polymer element test</title>
    <script src="bower_components/webcomponentsjs/webcomponents.min.js"></script>
    <link rel="import" href="bower_components/core-toolbar/core-toolbar.html" />
    <link rel="import" href="bower_components/core-scroll-header-panel/core-scroll-header-panel.html" />
    <link rel="import" href="bower_components/core-header-panel/core-header-panel.html" />
    <link rel="import" href="elements/img-share.html" />
  </head>
  <body fullbleed layout vertical unresolved>
    <core-scroll-header-panel flex>
      <core-toolbar>
        <div class="title">imgserve</div>
      </core-toolbar>
      <main id="content">
          <img-share></img-share>
      </main>
    </core-scroll-header-panel>
    <script>
      var socket = io('http://localhost:3000');
      var parent = document.getElementById('content');
      socket.on('file changed', function(data) {
        console.log('file changed');
        var firstChild = parent.firstChild;
        var new_img = document.createElement('img-share');
        new_img.src = "images/" + data.filename;
        //document.querySelector("#content").appendChild(new_img);
        parent.insertBefore(new_img, firstChild);
      });
    </script>
  </body>
</html>
